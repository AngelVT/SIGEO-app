<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../libs/bootstrap-icons-1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/socket.js"></script>
    <script src="js/navigation.js" defer></script>
    <script src="js/display.js" defer></script>
    <script src="js/funtionality.js" defer></script>
    <title>SIGEO - Dashboard</title>
</head>
<body>
    <nav>
        <h1>SIGEO</h1>
        <ul class="navigation-links" id="navigation_links">
            <li class="selected" id="oficios_link">Oficios</li>
            <li id="emitidos_link">Emitidos</li>
            <li class="dis-none" id="users_link">Users</li>
        </ul>
    </nav>
    <section class="controls-panel">
        <div class="control-set" id="oficios-controls">
            <form id="oficio_search">
                <input type="number" name="invoice" placeholder="Folio">
                <select name="year">
                    <option value="2025" selected>2025</option>
                </select>
                <select name="group">
                    <option value="">Seleccionar ...</option>
                    <option value="2">Dirección General</option>
                    <option value="3">Dirección de Licencias y Control Urbano</option>
                    <option value="4">Dirección de Investigación y Planeación Estratégica</option>
                    <option value="5">Órgano Interno de Control</option>
                    <option value="6">Dirección de Asuntos Jurídico</option>
                    <option value="7">Dirección de Finanzas y Administración</option>
                </select>
                <input type="text" name="name" placeholder="Nombre">
                <input type="text" name="subject" placeholder="Asunto">

                <label>Completado?
                    <select name="accomplished">
                        <option value="">Seleccionar ...</option>
                        <option value="true">Si</option>
                        <option value="false">No</option>
                    </select>
                </label>

                <label>Requiere respuesta?
                    <select name="response_required">
                        <option value="">Seleccionar ...</option>
                        <option value="true">Si</option>
                        <option value="false">No</option>
                    </select>
                </label>

                <button type="submit">Buscar</button>
            </form>

            <button class="bi-archive all-button" id="btn_all_oficio"></button>

            <button class="bi-folder-plus all-button" id="btn_create_oficio"></button>
        </div>

        <div class="control-set dis-none" id="emitidos-controls">
            <form id="emitido_search">
                <input name="invoice" type="number" placeholder="Folio">
                <select name="year">
                    <option value="2025" selected>2025</option>
                </select>
                <input type="text" name="name" placeholder="Nombre">
                <input type="text" name="subject" placeholder="Asunto">
                <input type="text" name="position" placeholder="Cargo">
                <label>Es respuesta?
                    <select name="is_response">
                        <option value="">Seleccionar ...</option>
                        <option value="true">Si</option>
                        <option value="false">No</option>
                    </select>
                </label>

                <button type="submit">Buscar</button>
            </form>

            <button class="bi-archive all-button" id="btn_all_emitido"></button>

            <button class="bi-folder-plus all-button" id="btn_create_emitido"></button>
        </div>

        <div class="control-set dis-none" id="users-controls">
            <form id="user_search">
                <input type="text" name="name" placeholder="Nombre">
                <input type="text" name="username" placeholder="Usuario">

                <select name="group">
                    <option value="">Seleccionar ... </option>
                    <option value="1">Sistema SIGEO</option>
                    <option value="2">Dirección General</option>
                    <option value="3">Dirección de Licencias y Control Urbano</option>
                    <option value="4">Dirección de Investigación y Planeación Estratégica</option>
                    <option value="5">Órgano Interno de Control</option>
                    <option value="6">Dirección de Asuntos Jurídico</option>
                    <option value="7">Dirección de Finanzas y Administración</option>
                </select>

                <select name="role">
                    <option value="">Seleccionar ... </option>
                    <option value="1">System</option>
                    <option value="2">Admin</option>
                    <option value="3">Moderator</option>
                    <option value="4">User</option>
                </select>

                <button type="submit">Buscar</button>
            </form>

            <button class="bi-people all-button" id="btn_all_user"></button>

            <button class="bi-person-plus all-button" id="btn_create_user"></button>
        </div>

    </section>
    <section class="information-panel">
        <ul class="page-indexes">
            <li>1</li>
            <li>2</li>
            <li>3</li>
        </ul>
        <div class="results-container" id="results">
        </div>
    </section>

    <section class="panel-background dis-none" id="oficio-panel">
        <span class="bi-x-square-fill close" id="oficio-panel-close"></span>
        <form id="oficio-registration">
            <p>Registrar Oficio</p>

            <label>Folio original:
                <input type="text" name="true_invoice" required>
            </label>

            <label>Nombre:
                <input type="text" name="name" required>
            </label>

            <label>Asunto:
                <input type="text" name="subject" required>
            </label>

            <label>Fecha de recepción:
                <input type="date" name="reception_date" required>
            </label>

            <label>Fecha limite:
                <input type="date" name="deadline" required>
            </label>

            <label>Dirección:
                <select name="group" required>
                    <option value="">Seleccionar ... </option>
                    <option value="2">Dirección General</option>
                    <option value="3">Dirección de Licencias y Control Urbano</option>
                    <option value="4">Dirección de Investigación y Planeación Estratégica</option>
                    <option value="5">Órgano Interno de Control</option>
                    <option value="6">Dirección de Asuntos Jurídico</option>
                    <option value="7">Dirección de Finanzas y Administración</option>
                </select>
            </label>

            <label>Requiere respuesta?:
                <input type="checkbox" name="response_required" required>
            </label>

            <label>PDF:
                <input type="file" name="oficio_pdf" accept=".pdf" required>
            </label>

            <button type="submit">Registrar</button>
        </form>
    </section>

    <section class="panel-background dis-none" id="emitted-panel">
        <span class="bi-x-square-fill close" id="emitted-panel-close"></span>
        <form id="emitted-registration">
            <p>Registrar Oficio Emitido</p>

            <label>Nombre:
                <input type="text" name="name">
            </label>

            <label>Cargo:
                <input type="text" name="position">
            </label>

            <label>Asunto:
                <input type="text" name="subject">
            </label>

            <label>Fecha de emisión:
                <input type="date" name="emission_date">
            </label>

            <label>Fecha de recepción:
                <input type="date" name="reception_date">
            </label>

            <label>Es respuesta?:
                <input type="checkbox" name="is_response" id="response_required_checkbox">
            </label>

            <label>Respuesta para:
                <select name="oficio_uuid" id="response_required_select">
                    <option value="">Seleccionar ... </option>
                </select>
            </label>

            <label>PDF:
                <input type="file" name="oficio_pdf" accept=".pdf">
            </label>

            <button type="submit">Registrar</button>
        </form>
    </section>

    <section class="panel-background dis-none" id="user-panel">
        <span class="bi-x-square-fill close" id="user-panel-close"></span>
        <form id="user-registration">
            <p>Registrar Usuario</p>

            <label>Nombre:
                <input type="text" name="name" required>
            </label>

            <label>Apellido Paterno:
                <input type="text" name="middleName" required>
            </label>

            <label>Apellido Materno:
                <input type="text" name="lastName" required>
            </label>

            <label>Usuario:
                <input type="text" name="username" required>
            </label>

            <label>Contraseña:
                <input type="password" name="password" required>
            </label>

            <label>Dirección:
                <select name="group">
                    <option value="">Seleccionar ... </option>
                    <option value="1">Sistema SIGEO</option>
                    <option value="2">Dirección General</option>
                    <option value="3">Dirección de Licencias y Control Urbano</option>
                    <option value="4">Dirección de Investigación y Planeación Estratégica</option>
                    <option value="5">Órgano Interno de Control</option>
                    <option value="6">Dirección de Asuntos Jurídico</option>
                    <option value="7">Dirección de Finanzas y Administración</option>
                </select>
            </label>
            
            <label>Rol:
                <select name="role">
                    <option value="">Seleccionar ... </option>
                    <option value="1">System</option>
                    <option value="2">Admin</option>
                    <option value="3">Moderator</option>
                    <option value="4">User</option>
                </select>
            </label>

            <div>
                <p>Permisos:</p>
                <label><input type="checkbox" name="permissions" value="1">  user:manage</label>
                <label><input type="checkbox" name="permissions" value="2"> user:read</label>
                <label><input type="checkbox" name="permissions" value="3"> user:create</label>
                <label><input type="checkbox" name="permissions" value="4"> user:update</label>
                <label><input type="checkbox" name="permissions" value="5"> user:delete</label>
                <label><input type="checkbox" name="permissions" value="6"> oficio:manage</label>
                <label><input type="checkbox" name="permissions" value="7"> oficio:read</label>
                <label><input type="checkbox" name="permissions" value="8"> oficio:create</label>
                <label><input type="checkbox" name="permissions" value="9"> oficio:update</label>
                <label><input type="checkbox" name="permissions" value="10"> oficio:delete</label>
                <label><input type="checkbox" name="permissions" value="11"> oficio:comment</label>
            </div>

            <button type="submit">Registrar</button>
        </form>
    </section>

    <script>
        const startYear = 2025;
        const currentYear = new Date().getFullYear();

        const yearSelectors = document.querySelectorAll('select[name="year"]');

        const yearArray = [];

        for (let i = currentYear; i >= startYear; i--) {
            if (i === currentYear)
                yearArray.push(`<option value="${i}" selected>${i}</option>`);
            else
                yearArray.push(`<option value="${i}">${i}</option>`);
        }

        for (const ys of yearSelectors) {
            ys.innerHTML = yearArray.join('\n')
        }
    </script>
</body>
</html>